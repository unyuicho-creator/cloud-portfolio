{
  "Version": "2012-10-17",
  "Statement": [
    { "Sid": "S3BucketsAndObjects", "Effect": "Allow", "Action": [
        "s3:CreateBucket","s3:PutBucketOwnershipControls","s3:PutBucketPublicAccessBlock",
        "s3:PutBucketPolicy","s3:GetBucketPolicy","s3:DeleteBucketPolicy",
        "s3:GetBucketLocation","s3:ListBucket",
        "s3:PutObject","s3:GetObject","s3:DeleteObject"
      ],
      "Resource": ["arn:aws:s3:::*","arn:aws:s3:::*/*"]
    },
    { "Sid": "CloudFrontWithOAC", "Effect": "Allow", "Action": [
        "cloudfront:CreateDistribution","cloudfront:UpdateDistribution","cloudfront:GetDistribution",
        "cloudfront:GetDistributionConfig","cloudfront:DeleteDistribution",
        "cloudfront:CreateInvalidation",
        "cloudfront:CreateOriginAccessControl","cloudfront:UpdateOriginAccessControl",
        "cloudfront:GetOriginAccessControl","cloudfront:DeleteOriginAccessControl",
        "cloudfront:ListOriginAccessControls","cloudfront:ListDistributions",
        "cloudfront:TagResource","cloudfront:UntagResource","cloudfront:ListTagsForResource"
      ],
      "Resource": "*"
    },
    { "Sid": "LambdaBasicCrud", "Effect": "Allow", "Action": [
        "lambda:CreateFunction","lambda:UpdateFunctionCode","lambda:UpdateFunctionConfiguration",
        "lambda:DeleteFunction","lambda:GetFunction","lambda:PublishVersion"
      ],
      "Resource": "arn:aws:lambda:ap-northeast-1:249896948893:function:*"
    },
    { "Sid": "ApiGatewayV2", "Effect": "Allow", "Action": [
        "apigateway:POST","apigateway:GET","apigateway:PUT","apigateway:PATCH","apigateway:DELETE"
      ],
      "Resource": [
        "arn:aws:apigateway:ap-northeast-1::/apis*",
        "arn:aws:apigateway:ap-northeast-1::/apis/*/routes*",
        "arn:aws:apigateway:ap-northeast-1::/apis/*/stages*",
        "arn:aws:apigateway:ap-northeast-1::/apis/*/integrations*"
      ]
    },
    { "Sid": "CloudWatchLogs", "Effect": "Allow", "Action": [
        "logs:CreateLogGroup","logs:DeleteLogGroup","logs:PutRetentionPolicy",
        "logs:DescribeLogGroups","logs:CreateLogStream","logs:PutLogEvents",
        "logs:DescribeLogStreams","logs:GetLogEvents"
      ],
      "Resource": "*"
    },
    { "Sid": "IamForLambdaExecRoleStrict", "Effect": "Allow", "Action": [
        "iam:CreateRole","iam:DeleteRole","iam:TagRole","iam:UntagRole",
        "iam:AttachRolePolicy","iam:DetachRolePolicy","iam:PutRolePolicy","iam:DeleteRolePolicy"
      ],
      "Resource": "arn:aws:iam::249896948893:role/cloud-portfolio-lambda-exec"
    },
    { "Sid": "PassOnlyLambdaExecRole", "Effect": "Allow", "Action": "iam:PassRole",
      "Resource": "arn:aws:iam::249896948893:role/cloud-portfolio-lambda-exec",
      "Condition": { "StringEquals": { "iam:PassedToService": "lambda.amazonaws.com" } }
    }
  ]
}
